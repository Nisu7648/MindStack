# âš™ï¸ ACCOUNTING SETTINGS & BOOK CONFIGURATION

## User-Controlled Book Management System

---

## ğŸ¯ OVERVIEW

Users can now **customize which accounting books to maintain** based on their business needs. This provides flexibility while ensuring compliance with mandatory books (Journal & Ledger).

### **Default Configuration:**
âœ… All books enabled by default

### **Mandatory Books (Cannot be disabled):**
- âœ… Journal Book
- âœ… Ledger

### **Optional Books (Can be enabled/disabled):**
- Purchase Book
- Sales Book
- Purchase Return Book
- Sales Return Book
- Cash Book
- Bank Book
- Petty Cash Book
- Bills Receivable Book
- Bills Payable Book

---

## ğŸ“± SETTINGS SCREEN

### **Access Settings:**
```
Main Menu â†’ Settings â†’ Accounting Settings â†’ Book Configuration
```

### **Settings Interface:**

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        ACCOUNTING BOOK CONFIGURATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MANDATORY BOOKS (Always ON):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… Journal Book                                                              â”‚
â”‚    Records all transactions in chronological order                          â”‚
â”‚    Status: ENABLED (Mandatory)                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Ledger                                                                    â”‚
â”‚    Account-wise record of all transactions                                  â”‚
â”‚    Status: ENABLED (Mandatory)                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

OPTIONAL BOOKS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘ï¸ Purchase Book                                          [Toggle ON/OFF]   â”‚
â”‚    Records credit purchases only                                            â”‚
â”‚    Status: ENABLED                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ï¸ Sales Book                                             [Toggle ON/OFF]   â”‚
â”‚    Records credit sales only                                                â”‚
â”‚    Status: ENABLED                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ï¸ Purchase Return Book                                   [Toggle ON/OFF]   â”‚
â”‚    Records goods returned to suppliers (Debit Notes)                        â”‚
â”‚    Status: ENABLED                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ï¸ Sales Return Book                                      [Toggle ON/OFF]   â”‚
â”‚    Records goods returned by customers (Credit Notes)                       â”‚
â”‚    Status: ENABLED                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ï¸ Cash Book                                              [Toggle ON/OFF]   â”‚
â”‚    Records all cash transactions                                            â”‚
â”‚    Status: ENABLED                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ï¸ Bank Book                                              [Toggle ON/OFF]   â”‚
â”‚    Records all bank transactions                                            â”‚
â”‚    Status: ENABLED                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ï¸ Petty Cash Book                                        [Toggle ON/OFF]   â”‚
â”‚    Records small expenses (Imprest System)                                  â”‚
â”‚    Status: ENABLED                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ï¸ Bills Receivable Book                                  [Toggle ON/OFF]   â”‚
â”‚    Records bills received from debtors                                      â”‚
â”‚    Status: ENABLED                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ï¸ Bills Payable Book                                     [Toggle ON/OFF]   â”‚
â”‚    Records bills given to creditors                                         â”‚
â”‚    Status: ENABLED                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    [Reset to Default]  [Save Settings]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ’» USAGE IN CODE

### **1. Get Current Settings:**

```javascript
import AccountingSettingsService from './services/accounting/accountingSettingsService';

// Get all settings
const result = await AccountingSettingsService.getSettings();
console.log(result.data.enabledBooks);

// Output:
// {
//   JOURNAL: true,
//   LEDGER: true,
//   PURCHASE_BOOK: true,
//   SALES_BOOK: true,
//   PURCHASE_RETURN: false,  // User disabled this
//   SALES_RETURN: false,     // User disabled this
//   CASH_BOOK: true,
//   BANK_BOOK: true,
//   PETTY_CASH_BOOK: false,  // User disabled this
//   BILLS_RECEIVABLE: false, // User disabled this
//   BILLS_PAYABLE: false     // User disabled this
// }
```

### **2. Enable/Disable a Book:**

```javascript
// Disable Purchase Return Book
await AccountingSettingsService.toggleBook('PURCHASE_RETURN', false);
// âœ… Purchase Return Book disabled successfully

// Enable Purchase Return Book
await AccountingSettingsService.toggleBook('PURCHASE_RETURN', true);
// âœ… Purchase Return Book enabled successfully

// Try to disable Journal (will fail)
await AccountingSettingsService.toggleBook('JOURNAL', false);
// âŒ Journal Book is mandatory and cannot be disabled
```

### **3. Check if Book is Enabled:**

```javascript
const isEnabled = await AccountingSettingsService.isBookEnabled('PURCHASE_BOOK');
console.log(isEnabled); // true or false
```

### **4. Get All Books with Status:**

```javascript
const result = await AccountingSettingsService.getAllBooksWithStatus();
console.log(result.data);

// Output:
// [
//   {
//     type: 'JOURNAL',
//     name: 'Journal Book',
//     description: 'Records all transactions in chronological order (Mandatory)',
//     enabled: true,
//     mandatory: true
//   },
//   {
//     type: 'PURCHASE_BOOK',
//     name: 'Purchase Book',
//     description: 'Records credit purchases only',
//     enabled: true,
//     mandatory: false
//   },
//   ...
// ]
```

### **5. Reset to Default (All Books Enabled):**

```javascript
await AccountingSettingsService.resetToDefault();
// âœ… Settings reset to default (all books enabled)
```

---

## ğŸ“ MAIN SCREEN USAGE

### **Method 1: Auto-Detect Books (Recommended)**

User enters transaction, system automatically determines which books to record in based on transaction type and settings:

```javascript
import TransactionRecordingService from './services/accounting/transactionRecordingService';

// User enters: "Sold goods to ABC Ltd for â‚¹59,000 with 18% GST"
const result = await TransactionRecordingService.recordTransaction({
  type: 'CREDIT_SALE',
  amount: 59000,
  customerName: 'ABC Pvt Ltd',
  invoiceNumber: 'INV-002',
  gstRate: 18
});

// System automatically records in:
// âœ… Journal (always)
// âœ… Ledger (always)
// âœ… Sales Book (if enabled)
// âœ… Cash Book (if enabled and payment mode is cash)

console.log(result.message);
// âœ… Transaction recorded successfully!
// Voucher: SAL-2425-0002
// Amount: â‚¹59,000.00
// Recorded in: Journal, Ledger, Sales Book
```

### **Method 2: User Specifies Books**

User can explicitly mention which books to record in:

```javascript
// User says: "Record this sale in Sales Book and Cash Book"
const result = await TransactionRecordingService.recordTransaction({
  type: 'CREDIT_SALE',
  amount: 59000,
  customerName: 'ABC Pvt Ltd',
  invoiceNumber: 'INV-002',
  gstRate: 18,
  recordInBooks: ['SALES_BOOK', 'CASH_BOOK'] // User specified
});

// System records in:
// âœ… Journal (always)
// âœ… Ledger (always)
// âœ… Sales Book (user specified, if enabled)
// âœ… Cash Book (user specified, if enabled)
```

### **Method 3: Natural Language (AI Processing)**

User can use natural language, AI processes and determines books:

```javascript
// User says: "Record purchase of goods worth â‚¹50,000 from XYZ Traders in purchase book"

// AI processes and creates:
const result = await TransactionRecordingService.recordTransaction({
  type: 'CREDIT_PURCHASE',
  amount: 50000,
  supplierName: 'XYZ Traders',
  recordInBooks: ['PURCHASE_BOOK'] // AI extracted from user's request
});
```

---

## ğŸ¯ TRANSACTION TYPE â†’ BOOK MAPPING

### **Automatic Book Detection:**

| Transaction Type | Books Recorded (if enabled) |
|-----------------|----------------------------|
| **CASH_SALE** | Journal, Ledger, Sales Book, Cash Book |
| **CREDIT_SALE** | Journal, Ledger, Sales Book |
| **CASH_PURCHASE** | Journal, Ledger, Purchase Book, Cash Book |
| **CREDIT_PURCHASE** | Journal, Ledger, Purchase Book |
| **PURCHASE_RETURN** | Journal, Ledger, Purchase Return Book |
| **SALES_RETURN** | Journal, Ledger, Sales Return Book |
| **CASH_RECEIPT** | Journal, Ledger, Cash Book |
| **CASH_PAYMENT** | Journal, Ledger, Cash Book |
| **BANK_RECEIPT** | Journal, Ledger, Bank Book |
| **BANK_PAYMENT** | Journal, Ledger, Bank Book |
| **PETTY_CASH** | Journal, Ledger, Petty Cash Book |
| **BILL_RECEIVABLE** | Journal, Ledger, Bills Receivable Book |
| **BILL_PAYABLE** | Journal, Ledger, Bills Payable Book |

---

## ğŸ“Š EXAMPLES

### **Example 1: Small Business (Minimal Books)**

**Business:** Small retail shop, only cash transactions

**Settings:**
```
âœ… Journal Book (mandatory)
âœ… Ledger (mandatory)
âŒ Purchase Book (disabled)
âŒ Sales Book (disabled)
âŒ Purchase Return Book (disabled)
âŒ Sales Return Book (disabled)
âœ… Cash Book (enabled)
âŒ Bank Book (disabled)
âŒ Petty Cash Book (disabled)
âŒ Bills Receivable Book (disabled)
âŒ Bills Payable Book (disabled)
```

**Transaction:**
```javascript
{
  type: 'CASH_SALE',
  amount: 5000,
  customerName: 'Walk-in Customer'
}
```

**Recorded in:**
- âœ… Journal
- âœ… Ledger
- âœ… Cash Book
- âŒ Sales Book (disabled by user)

---

### **Example 2: Medium Business (Standard Books)**

**Business:** Trading company with credit sales/purchases

**Settings:**
```
âœ… Journal Book (mandatory)
âœ… Ledger (mandatory)
âœ… Purchase Book (enabled)
âœ… Sales Book (enabled)
âœ… Purchase Return Book (enabled)
âœ… Sales Return Book (enabled)
âœ… Cash Book (enabled)
âœ… Bank Book (enabled)
âŒ Petty Cash Book (disabled)
âŒ Bills Receivable Book (disabled)
âŒ Bills Payable Book (disabled)
```

**Transaction:**
```javascript
{
  type: 'CREDIT_SALE',
  amount: 59000,
  customerName: 'ABC Pvt Ltd',
  invoiceNumber: 'INV-002',
  gstRate: 18
}
```

**Recorded in:**
- âœ… Journal
- âœ… Ledger
- âœ… Sales Book

---

### **Example 3: Large Business (All Books)**

**Business:** Manufacturing company with complex transactions

**Settings:**
```
âœ… All books enabled (default)
```

**Transaction:**
```javascript
{
  type: 'CREDIT_PURCHASE',
  amount: 100000,
  supplierName: 'XYZ Industries',
  invoiceNumber: 'PINV-001',
  gstRate: 18
}
```

**Recorded in:**
- âœ… Journal
- âœ… Ledger
- âœ… Purchase Book

---

## ğŸ”§ COMPANY DETAILS SETTINGS

Users can also configure company details:

```javascript
await AccountingSettingsService.updateCompanyDetails({
  companyName: 'ABC Pvt Ltd',
  financialYearStart: 'April',
  gstNumber: '27AABCU9603R1ZM',
  panNumber: 'AABCU9603R',
  address: '123, Main Street, Mumbai - 400001',
  phone: '+91 98765 43210',
  email: 'info@abcpvtltd.com'
});
```

These details will appear in:
- PDF headers
- Invoice generation
- Reports
- Financial statements

---

## ğŸ“„ PDF GENERATION WITH SETTINGS

PDFs are generated only for enabled books:

```javascript
// Generate Sales Book PDF (only if enabled)
const isEnabled = await AccountingSettingsService.isBookEnabled('SALES_BOOK');

if (isEnabled) {
  await SubsidiaryBooksPDFService.generateSalesBookPDF({
    month: 'December',
    year: '2024'
  });
} else {
  console.log('Sales Book is disabled in settings');
}
```

---

## âœ… BENEFITS

### **1. Flexibility:**
- Users choose only the books they need
- Reduces clutter and complexity
- Faster data entry

### **2. Compliance:**
- Journal and Ledger always maintained (mandatory)
- Meets legal requirements
- Audit trail preserved

### **3. Customization:**
- Small businesses: Minimal books
- Medium businesses: Standard books
- Large businesses: All books

### **4. Efficiency:**
- Less data to manage
- Faster PDF generation
- Reduced storage

---

## ğŸ“ BEST PRACTICES

### **1. Start with Default:**
- Begin with all books enabled
- Disable books gradually as you understand your needs

### **2. Mandatory Books:**
- Never try to disable Journal or Ledger
- These are required for compliance

### **3. Review Periodically:**
- Review book settings quarterly
- Enable books if business grows
- Disable unused books

### **4. Backup Before Changes:**
- Export data before disabling books
- Keep PDF copies of disabled books

---

## ğŸ“ˆ STATISTICS

### **Files Created:**
- âœ… **accountingSettingsService.js** - 400+ lines (Settings management)
- âœ… **Updated transactionRecordingService.js** - 600+ lines (Settings integration)

### **Features:**
- âœ… 11 configurable books
- âœ… 2 mandatory books (Journal, Ledger)
- âœ… 9 optional books
- âœ… Company details configuration
- âœ… Auto-detect book recording
- âœ… User-specified book recording
- âœ… Natural language support

---

**Last Updated:** January 1, 2025  
**Version:** 1.0  
**Status:** âœ… Production Ready  
**Feature:** User-Controlled Book Configuration
